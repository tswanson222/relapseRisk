---
output:
  html_document:
    toc: true
    toc_float: true
params: 
  participant: NULL
  set_title: "TITLE"
  set_date: "DATE"
  stoplights: NULL
title: "`r params$set_title`"
date: "`r params$set_date`"
---

```{r setup, include = FALSE}
library(relapseRisk)
participant <- params$participant
risk <- predictRisk(participant, pilr = TRUE)
risk <- risk[nrow(risk), 'risk']
```

# Risk Level

<center>
```{r stoplight, echo = FALSE, out.width = "150px", fig.cap = paste("Risk Level:", risk)}
light <- ifelse(risk == 'HIGH', 'red', ifelse(risk == 'LOW', 'green', 'yellow'))
knitr::include_graphics(params$stoplights[light])
```
</center>

# EPSI

```{r thetaViz1, echo = FALSE, message = FALSE, warning = FALSE}
plotThetas(data = participant, survey = 'epsi')
```

```{r table1, echo = FALSE}
itemTable(data = participant, survey = 'epsi')
```

# IDAS

```{r thetaViz2, echo = FALSE, message = FALSE, warning = FALSE}
plotThetas(data = participant, survey = 'idas')
```

```{r table2, echo = FALSE}
itemTable(data = participant, survey = 'idas')
```
